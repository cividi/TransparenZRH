tasks:
  - type: package
    steps:
      - code: resource-transform
        name: data
        steps:
          - code: table-normalize
    source: 
      name: car-{{params.sensor_id}}
      title: MIV-Zählstelle {{params.sensor_name}}
      description: 
      sources: []
      licenses:
        - title: Creative Commons CCZero Lizenz
          name: CC0
          path: http://www.opendefinition.org/licenses/cc-zero
      resources:
        - data:
            - label: Letzte Stunde
              value: "400"
              unit: Fahrzeuge
              date: "{{params.date}}"
            - label: Seit Mitternacht
              value: "3'620"
              unit: Fahrzeuge
              date: "{{params.date}}"
            - label: Summe gestern
              value: "20'789"
              unit: Fahrzeuge
              date: "{{params.date}}"
            - label: Tagesdurchschnitt letzte 7 Tage
              value: "4'020"
              unit: Fahrzeuge
              date: "{{params.date}}"
            - label: Fahrzeuge pro Stunde
              value: 
              unit:
              date: "{{params.date}}"
          name: data
          format: inline
          schema:
            fields:
              - name: label
                type: string
              - name: value
                type: string
              - name: unit
                type: string
              - name: date
                type: string
      views:
        - name: gauge_view
          title: MIV-Zählstelle {{params.sensor_name}}
          resources:
            - data
          specType: tiles-gauge
          spec:
            label:
              field: label
            value:
              field: value
            unit:
              field: unit
            date:
              field: date
